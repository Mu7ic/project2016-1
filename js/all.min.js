var App=angular.module("BiBiApp",["ngRoute","ngAnimate","ngMaterial","ngMessages"]);App.config(["$compileProvider",function(e){e.debugInfoEnabled(!1)}]),App.controller("RootCtrl",["$scope","$rootScope","$location","$http","$timeout","$anchorScroll","$mdDialog","$mdMedia",function(e,o,n,t,r,i,a,c){e.getHeader=function(){var e=n.url(),o=e?e[0].toUpperCase()+e.slice(1):"main";return-1!=o.indexOf("profile")?!1:"views/headers/"+e+".html"},e.user={avatar:"images/profile-photo.png",firstName:"Алексей",lastName:"Акиньшин",middleName:"Игоревич",phone:"+7 (919) 234-58-64",mail:"aleksey.sys.ak@gmail.com"},e.$on("$locationChangeSuccess",function(e,o,n){i()}),e.prevent=function(e){e.stopPropagation()},e.openAuth=function(){e.$broadcast("showAuth")}}]),App.controller("MainCtrl",["$scope","$rootScope","$timeout",function(e,o,n){e.$on("showAuth",function(){e.showAuthorize=!0}),e.hideAuth=function(){e.showAuthorize=!1}}]),App.controller("MeCtrl",["$scope","$rootScope","$timeout","$routeParams","$location",function(e,o,n,t,r){e.initMe=function(){},e.getSection=function(){var e=t.section||"main";return"views/sections/me-"+e+".html"},e.currentSection=function(){var o=t.section||"main";return e.menu.filter(function(e){return-1!=e.href.indexOf(o)})[0]},e.addCompany=function(){r.url("reg")},e.points=[{name:"LR-Premium",logo:"images/logo.png",desc:"Сертифицированный сервис для вашего Land Rover в Москве. Комплексная диагностика в подарок при первом посещении."},{name:"Porsche Family",logo:"images/logo.png",desc:"Сертифицированный сервис для вашего Porsche в Москве. Комплексная диагностика в подарок при первом посещении."}],e.menu=[{href:"#/me/main",name:"Редактировать профиль",marker:"images/pointer.svg",action:function(){e.showProfileChange=!0}},{href:"#/me/password",name:"Изменить пароль",marker:"images/car.svg",action:function(){e.showPasswordChange=!0}},{href:"#/me/email",name:"Изменить e-mail",marker:"images/calendar.svg",action:function(){e.showMailChange=!0}}]}]),App.controller("ProfileCtrl",["$scope","$rootScope","$timeout","$routeParams",function(e,o,n,t){e.initProfile=function(){$(".header.slogan").hide(),$.get("/data/markBlocks.json").done(function(o){e.markBlocks=o}),$.get("/data/workTypes.json").done(function(o){e.workBlocks=o}),$.get("/data/otherTypes.json").done(function(o){e.other=o})},e.logo="images/logo.png",e.status=!0,e.getSection=function(){var e=t.section||"main";return"views/sections/profile-"+e+".html"},e.isActive=function(e){var o=e.split("/").splice(-1),n=t.section||"main";return o==n?"active":""},e.menu=[{href:"#/profile/main",name:"Профиль",marker:"images/pointer.svg"},{href:"#/profile/contacts",name:"Контакты и реквизиты",marker:"images/pointer.svg"},{href:"#/profile/vendors",name:"Марки и услуги",marker:"images/car.svg"},{href:"#/profile/employees",name:"Сотрудники и график",marker:"images/calendar.svg"},{href:"#/profile/photo",name:"Фото и видео",marker:"images/photo.svg"},{href:"#/profile/sales",name:"Акции и спецпредложения",marker:"images/actions.svg"},{href:"#/profile/settings",name:"Настройки отображения",marker:"images/gears.svg"}],e.currentSection=function(){var o=t.section||"contacts";return e.menu.filter(function(e){return-1!=e.href.indexOf(o)})[0]},e.checkBlocks=function(e){e.forEach(function(o){o.items.forEach(function(o){o.status=!e.checked})})},e.getChecked=function(e){var o=0;return e.items.forEach(function(e){e.status&&o++}),o},e.checkAll=function(e){e.items.forEach(function(o){o.status=!e.checked})},e.countChecked=function(e){var o=0;return e.forEach(function(e){e.items.forEach(function(e){e.status&&o++})}),o},e.countTotal=function(e){var o=0;return e.forEach(function(e){o+=e.items.length}),o}}]),App.controller("RegCtrl",["$scope","$rootScope","$timeout",function(e,o,n){}]);var dirs=["reg","main","profile","me"];App.config(["$routeProvider",function(e){dirs.forEach(function(o){var n=o[0].toUpperCase()+o.slice(1);e.when("/"+o,{templateUrl:"views/"+o+".html",controller:n+"Ctrl"})}),e.when("/profile/:section",{templateUrl:"views/profile.html",controller:"ProfileCtrl"}),e.when("/me/:section",{templateUrl:"views/me.html",controller:"MeCtrl"}),e.otherwise({redirectTo:"/main"})}]);